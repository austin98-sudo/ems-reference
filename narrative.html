<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Narrative Template Generator</title>
</head>
<style>
   * {
      font-family: Arial, Helvetica, sans-serif;
    }

    div.inline-input {
        display: flex;
        align-items: center;
        margin-top: 5px;
        margin-bottom: 5px;
    }

    div.inline-input *:not(:first-child){
        margin-left: 5px;
    }

    label {
      display: block;
      margin-bottom: 10px;
    }

    fieldset {
        margin-top: 10px;
    }

    input[type="text"] {
      width: 50%;
    }

    input,select,textarea {
        font-size: 12pt;
        display: block;
        margin-bottom: 5px;
    }

    h1 {
      margin-top: 0;
      margin-bottom: 0.5em;
    }

    .input-card {
      background-color: #d6d3d1;
      padding: 0.5em 1em;
      border-radius: 5px;
      margin-bottom: 0.5em;
    }

    button {
      margin-top: 10px;
      margin-right: 5px;
      padding: 1em 2em;
      border-radius: 5px;
      border: 1px solid transparent;
      box-shadow: 1px 1px 2px gray;
    }
</style>
<body>

  <!--Dispatch-->
  <div class="input-card">
    <h1>Dispatch</h1>
    <select onchange="dispatchPreview()" id="station">
        <option>Wintergreen station 1</option>
        <option>Wintergreen station 2</option>
        <option>Nelson EMS</option>
    </select>
    <input onchange="dispatchPreview()" type="text" placeholder="EMD Complaint" id="emdcomplaint">
    <div class="inline-input">
        <select onchange="dispatchPreview()" id="level">
            <option>Medic</option>
            <option>Trauma</option>
            <option>Rescue</option>
        </select>
        <input onchange="dispatchPreview()" type="text" id="unit" placeholder="Unit number">
    </div>
    <select onchange="dispatchPreview()" id="responseMethod">
        <option>Lights and sirens</option>
        <option>Lights and no sirens</option>
        <option>No lights and no sirens</option>
    </select>
    <fieldset>
        <legend>Preview</legend>
        <p id="dispatchPreview"></p>
    </fieldset>
  </div>
  
  <!--Complaint-->
  <div class="input-card">
    <h1>Complaint</h1>
    <textarea onchange="complaintPreview()" type="text" id="complaint" cols="80" rows="3" placeholder="Usually one sentence, in the patient’s own words, put inside quotes. If patient cannot tell you, you can describe why he/she needs assistance."></textarea>
    <fieldset>
        <legend>Preview</legend>
        <p id="complaintPreview"></p>
    </fieldset>
  </div>

  <!--History-->
  <div class="input-card">
    <h1>History</h1>
    <textarea onchange="historyPreview()" type="text" id="history" cols="80" rows="3" placeholder="History of both this specific medical problem or traumatic event. Include SAMPLE and OPQRST history."></textarea>
    <fieldset>
        <legend>Preview</legend>
        <p id="historyPreview"></p>
    </fieldset>
  </div>

  <!--Assessment-->
  <div class="input-card">
    <h1>Assessment</h1>
    <input onchange="assessmentPreview()" type="text" id="found" placeholder="Where you found the patient">
    <input onchange="assessmentPreview()" type="number" id="age" placeholder="Patient age">
    <select id="gender">
      <option>Male</option>
      <option>Female</option>
    </select>
    <select onchange="assessmentPreview()" id="AAO">
      <option>AAO x 4</option>
      <option>AAO x 3</option>
      <option>AAO x 2</option>
      <option>AAO x 1</option>
    </select>
    <input onchange="assessmentPreview()" type="text" id="" value="Airway is patent. Breathing is at an appropriate rate and depth to sustain life. Pulse is present.">
    <textarea id="additionalAssessment" onchange="assessmentPreview()" cols="80" rows="3" placeholder="Additional assessment"></textarea>
    <fieldset>
        <legend>Preview</legend>
        <p id="assessmentPreview"></p>
    </fieldset>
  </div>

  <!--RX-->
  <div class="input-card">
    <h1>RX</h1>
    <input type="text" onchange="rxPreview()" id="sceneRx" placeholder="Scene vitals, procedures, and medications">
    <input type="text" onchange="rxPreview()" id="transportRx" placeholder="Transport vitals, procedures, and medications">
    <fieldset>
      <legend>Preview</legend>
      <p id="rxPreview"></p>
    </fieldset>
  </div>

  <!--Transport-->
  <div class="input-card">
    <h1>Transport</h1>
    <input id="consent" type="text" onchange="transportPreview()" placeholder="Did the patient want to be taken to a facility for further assessment and treatment?">
    <input id="move" type="text" onchange="transportPreview()" placeholder="How did the patient get from where you found them to the ambulance?" value="PT was moved to ambulance via stretcher and secured via 3 saftey belts.">
    <select id="hospital">
      <option>UVA</option>
      <option>Augusta Health</option>
      <option>Lynchburg General</option>
      <option>Martha Jefferson</option>
    </select>
    <select id="transportMode">
      <option>Emergent</option>
      <option>Non-emergent</option>
    </select>
    <select id="contact">
      <option>Radio</option>
      <option>Phone</option>
    </select>
    <textarea id="moveHospital" type="text" onchange="transportPreview()" placeholder="On arrival, where was the patient left (ED room bed, triage, hall bed)?"></textarea>
    <fieldset>
      <legend>Preview</legend>
      <p id="transportPreview"></p>
    </fieldset>
  </div>

  <!--Exceptions-->
  <div class="input-card">
    <h1>Exceptions</h1>
    <textarea onchange="exceptionsPreview()" id="exceptions" cols="80" rows="3">None</textarea>
    <fieldset>
      <legend>Preview</legend>
      <p id="exceptionsPreview"></p>
    </fieldset>
  </div>

  <!--Template-->
  <div class="input-card">
    <h1>Narrative Template</h1>
    <input type="checkbox" id="agreement" style="display:inline" onclick="enableBtn()"><span> I confirm that I have reviewed the generated EMS PCR template and made any necessary edits to ensure the accuracy, completeness, and grammatical correctness of the report. I acknowledge that it is my responsibility to ensure all information is truthful, detailed, and documented to the best of my ability, and that the report aligns with applicable protocols and standards of care.</span><br>
    <button id="templateBtn" onclick="generateTemplate()" disabled>Generate Template</button>
    <textarea style="margin-top: 10px;" id="template" cols="100" rows="30"></textarea>
  </div>
  
</body>
<script>

alert("Disclaimer: \n\nThis EMS PCR template generator is provided as a general tool to assist EMS providers in documenting patient care. Users are solely responsible for ensuring the accuracy, completeness, and detail of their reports. This template is not tailored to meet the specific requirements of every clinical scenario, regulatory standard, or jurisdiction. It is the responsibility of the provider to verify that the generated report aligns with applicable protocols, guidelines, and standards of care.\n\nProviders must ensure that all narratives and entries accurately reflect the events, assessments, and care provided to the best of their ability. Patient care reports are legal documents and may be reviewed in court or other legal proceedings. Inaccurate or incomplete documentation can have serious consequences, including legal or professional repercussions. Always exercise clinical judgment, document truthfully, and adhere to your organization’s policies when completing patient care documentation.");


    dispatchPreview()
    complaintPreview()
    historyPreview()
    assessmentPreview()
    rxPreview()
    transportPreview()
    exceptionsPreview()

    function enableBtn() {
      console.log(document.getElementById("agreement").checked)
      document.getElementById("templateBtn").disabled = (document.getElementById("agreement").checked) ? false : true
    }

    function generateTemplate() {
      document.getElementById("template").value = `D- ${document.getElementById("dispatchPreview").innerText}\n\nC- ${document.getElementById("complaintPreview").innerText}\n\nH- ${document.getElementById("historyPreview").innerText}\n\nA- ${document.getElementById("assessmentPreview").innerText}\n\nR- ${document.getElementById("rxPreview").innerText}\n\nT- ${document.getElementById("transportPreview").innerText}\n\nE- ${document.getElementById("exceptionsPreview").innerText}`
    }

    function dispatchPreview() {
        document.getElementById("dispatchPreview").innerText = `${document.getElementById("station").value} was dispatched for ${document.getElementById("emdcomplaint").value.toLowerCase()}. ${document.getElementById("level").value} ${document.getElementById("unit").value} responded with ${document.getElementById("responseMethod").value.toLowerCase()}`
    }

    function complaintPreview() {
        document.getElementById("complaintPreview").innerText = `${document.getElementById("complaint").value}`
    }

    function historyPreview() {
        document.getElementById("historyPreview").innerText = `${document.getElementById("history").value}`
    }

    function assessmentPreview() {
      document.getElementById("assessmentPreview").innerText = `Pt is a ${document.getElementById("age").value} year old ${document.getElementById("gender").value.toLowerCase()} who is ${document.getElementById("AAO").value}. ${document.getElementById("found").value}. ${document.getElementById("additionalAssessment").value}`
    }

    function rxPreview() {
      document.getElementById("rxPreview").innerText = `(Scene) ${document.getElementById("sceneRx").value}. (Transport) ${document.getElementById("transportRx").value}.`
    }

    function transportPreview() {
      document.getElementById("transportPreview").innerText = `${document.getElementById("consent").value}. ${document.getElementById("move").value}. Pt was transported to ${document.getElementById("hospital").value}, ${document.getElementById("transportMode").value.toLowerCase()} and was contacted via ${document.getElementById("contact").value.toLowerCase()}. ${document.getElementById("moveHospital").value}`
    }

    function exceptionsPreview() {
      document.getElementById("exceptionsPreview").innerText = document.getElementById("exceptions").value
    }


</script>
</html>
